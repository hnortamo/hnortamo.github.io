<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Quick Start Guide Example</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
  -->
   <link rel="stylesheet" href="/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

</head>
<body>
  <div id="map" style="width: 1920px; height: 1500px"></div>

 <!-- <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
 -->
  <script src="/leaflet.js"></script>
  <script>
	   var map = L.map('map').setView([51.505, 60], 5);
     L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

//	   fetch('http://localhost:8000/custom.geo.json')
//	   fetch('/europe-asia-large.json')
//  .then(response => {
//    if (!response.ok) {
//      throw new Error('Network response was not ok');
//    }
//    return response.json();
//  })
//  .then(data => {
//	var lander = data.features
//	  for (let i = 0; i < lander.length; i++) {
//		L.geoJSON(lander[i]).addTo(map)
//	  }
//    // Process the JSON data here
//    console.log(data.features);
//    // ... further logic using the data
//  })
//  .catch(error => {
//    console.error('There has been a problem with your fetch operation:', error);
//  });

  var supercomputers = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "LUMI",
        "description": "Kajaani, Finland"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [27.727850, 64.222176]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Vega",
        "description": "Maribor, Slovenia"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [15.6412, 46.5547]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "MeluXina",
        "description": "Bissen, Luxembourg"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [6.1319, 49.6116]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Discoverer",
        "description": "Sofia, Bulgaria"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [23.3218, 42.6977]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Karolina",
        "description": "Ostrava, Czech Republic"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [18.2555, 49.8420]
      }
    }
  ]
}

var travellocations3={
  "type": "FeatureCollection",
  "features":
  [
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        22.696917,
        63.674386
      ]
    },
    "properties": {
      "name": "Jakobstad"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        24.941943,
        60.321394
      ]
    },
    "properties": {
      "name": "Helsingfors"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        28.735981,
        41.282913
      ]
    },
    "properties": {
      "name": "Istanbul"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.167471,
        -8.745993
      ]
    },
    "properties": {
      "name": "Airport"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.260535,
        -8.507562
      ]
    },
    "properties": {
      "name": "Homestay"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.261416,
        -8.506043
      ]
    },
    "properties": {
      "name": "Water Palace"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.262567,
        -8.506669
      ]
    },
    "properties": {
      "name": "Ubud Palace"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.260432,
        -8.502588
      ]
    },
    "properties": {
      "name": "Rice field walk"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.254840,
        -8.500087
      ]
    },
    "properties": {
      "name": "Campuhan Ridge Walk"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.260974,
        -8.506420
      ]
    },
    "properties": {
      "name": "Tinos Warung"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.260910,
        -8.518746
      ]
    },
    "properties": {
      "name": "Monkey forest"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.279185,
        -8.427641
      ]
    },
    "properties": {
      "name": "Tengalalang risfält"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.323094,
        -8.405686
      ]
    },
    "properties": {
      "name": "Satria Luwak Coffee"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.332103,
        -8.532003
      ]
    },
    "properties": {
      "name": "Kanto lampo"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.324845,
        -8.526894
      ]
    },
    "properties": {
      "name": "Warung Babi Guling Pande Egi"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.288949,
        -8.575945
      ]
    },
    "properties": {
      "name": "Tegenugan Waterfall"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.257652,
        -8.516298
      ]
    },
    "properties": {
      "name": "Svaha spa"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.155402,
        -8.683523
      ]
    },
    "properties": {
      "name": "Origin seminyak"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.159301,
        -8.693985
      ]
    },
    "properties": {
      "name": "Surfing "
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.151144,
        -8.682198
      ]
    },
    "properties": {
      "name": "Petitenget"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.149571,
        -8.679344
      ]
    },
    "properties": {
      "name": "Potato head beach club"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.157129,
        -8.674233
      ]
    },
    "properties": {
      "name": "Shooters (minigolf)"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.161007,
        -8.696882
      ]
    },
    "properties": {
      "name": "Middag vid stranden"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.153519,
        -8.679375
      ]
    },
    "properties": {
      "name": "Lunch rooftop (matförgiftning?)"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.165224,
        -8.809389
      ]
    },
    "properties": {
      "name": "Tre små statyer"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        115.166807,
        -8.813743
      ]
    },
    "properties": {
      "name": "Stor staty "
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        103.850345,
        1.298950
      ]
    },
    "properties": {
      "name": "Hotel mi bencolen"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        103.853780,
        1.299299
      ]
    },
    "properties": {
      "name": "Bugis+"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        103.860928,
        1.283090
      ]
    },
    "properties": {
      "name": "Marina bay sands"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        103.866050,
        1.284280
      ]
    },
    "properties": {
      "name": "Cloud forest"
    }
  },
  {
    "type": "Feature",
    "geometry": {
      "type": "Point",
      "coordinates": [
        103.863688,
        1.281982
      ]
    },
    "properties": {
      "name": "Supertree"
    }
  }
]

}


//	  for (let i = 0; i < supercomputers.features.length; i++) {
//		coord = supercomputers.features[i].geometry.coordinates
//		  L.marker([coord[1],coord[0]]).addTo(map);
	//	L.marker([49.84,18.25]).addTo(map);

	 // }

	   fetch('/places.json')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(travellocations => {
	  for (let i = 0; i < travellocations.features.length-1; i++) {
	   startPoint=[travellocations.features[i].geometry.coordinates[1],travellocations.features[i].geometry.coordinates[0]];
	   endPoint=[travellocations.features[i+1].geometry.coordinates[1],travellocations.features[i+1].geometry.coordinates[0]];
	   var polyline = L.polyline([startPoint, endPoint],
  //     { color: "red",
  //  weight: 2,
  //  smoothFactor: 1}
{color: 'black', weight: '3',  dashArray: '20, 20', dashOffset: '0'}
     ).addTo(map);
	  }
	  for (let i = 0; i < travellocations.features.length; i++) {
		coord = travellocations.features[i].geometry.coordinates
		  name = travellocations.features[i].properties.name
		  L.circleMarker([coord[1],coord[0]],
			{ color: 'red',
        		fillColor: '#f03',}
		  ).bindPopup("<b>"+name+"</b>").addTo(map);

	  }

  })
  .catch(error => {
    console.error('There has been a problem with your fetch operation:', error);
  });

	  for (let i = 0; i < travellocations.features.length-1; i++) {
	   startPoint=[travellocations.features[i].geometry.coordinates[1],travellocations.features[i].geometry.coordinates[0]];
	   endPoint=[travellocations.features[i+1].geometry.coordinates[1],travellocations.features[i+1].geometry.coordinates[0]];
	   var polyline = L.polyline([startPoint, endPoint],
  //     { color: "red",
  //  weight: 2,
  //  smoothFactor: 1}
{color: 'black', weight: '3',  dashArray: '20, 20', dashOffset: '0'}
     ).addTo(map);
	  }
	  for (let i = 0; i < travellocations.features.length; i++) {
		coord = travellocations.features[i].geometry.coordinates
		  name = travellocations.features[i].properties.name
		  L.circleMarker([coord[1],coord[0]],
			{ color: 'red',
        		fillColor: '#f03',}
		  ).bindPopup("<b>"+name+"</b>").addTo(map);

	  }
      const queryString = window.location.search;
     const urlParams = new URLSearchParams(queryString);
     if (urlParams.has('lat')){
      const lat = urlParams.get('lat')
      const lon = urlParams.get('long')
      map.flyTo([lat,lon],15)
     }




  </script>
</body>
</html>